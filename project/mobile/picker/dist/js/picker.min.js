"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,n){var a={},i=[31,28,31,30,31,30,31,31,30,31,30,31],o=function(e){return e<10&&(e="0"+e),""+e},l={},s=function(e,t,n,a){Transform(e,!0),l[n]=new AlloyTouch({touch:e,target:e,max:0,min:a*t||0,property:"translateY",step:t,initialValue:0})},r=function(){function e(t,n){_classCallCheck(this,e),this.$dom=t,this.defaults={starYear:2010,itemH:42,endYear:2030,callback:null},this.options=Object.assign(!0,this.defaults,n||{}),this.$dom.is("input")?this.isInput=!0:this.isInput=!1}return _createClass(e,[{key:"init",value:function(){return this.event(),this}},{key:"renderDom",value:function(){if(t.getElementById("zlwDateBox"))return!1;$("body").append('<div id="zlwDateBox">\n            \t\t\t\t<header class="pickerHeader"><button class="pickerBtn" id="pickerSure">确定</button><button class="pickerBtn" id="pickerEsc">取消</button>\n                        </header>\n                        <section class="pickerTitle"><span>年</span><span>月</span><span>日</span></section>\n                        <div class="pickerBody">\n                            <div class="pickerList" id="yearBox"><div><ul></ul></div></div>\n                            <div class="pickerList" id="monthBox"><ul></ul></div>\n                            <div class="pickerList" id="dateBox"><ul></ul></div>\n                        </div>\n                    </div>'),setTimeout(function(){t.getElementById("zlwDateBox").classList.add("pickerIn")},10),this.AlloyTouch(),this.pickerEvent(),this.creatYear(),this.creatMonth(),this.creatDate()}},{key:"AlloyTouch",value:function(){var e=this.defaults.endYear-this.defaults.starYear,n=t.querySelector("#yearBox ul"),a=t.querySelector("#monthBox ul"),i=t.querySelector("#dateBox ul");s(n,this.options.itemH,"year",1-e),s(a,this.options.itemH,"month",-11),s(i,this.options.itemH,"date")}},{key:"pickerEvent",value:function(){var e=this;t.getElementById("pickerEsc").onclick=function(){e.destroy()},t.getElementById("pickerSure").onclick=function(){e.destroy();var t=a.year+"-"+a.month+"-"+a.date;e.isInput?e.$dom.val(t):e.$dom.data("date",t),e.options.callback&&e.options.callback(t,a)}}},{key:"destroy",value:function(){[null,null,null].forEach(function(e){null!=e&&(e.destroy(),e=null)}),t.getElementById("pickerEsc").onclick=null,t.getElementById("pickerSure").onclick=null,t.getElementById("zlwDateBox").classList.remove("pickerIn"),setTimeout(function(){$("#zlwDateBox,#zlwBj").remove()},350)}},{key:"creatYear",value:function(){for(var e=this,n=e.defaults.endYear-e.defaults.starYear,o=0,s="",r=e.options.itemH,c=a.year-e.options.starYear;o<n;o++){var u=e.defaults.starYear+o;s+=c===o?"<li data-num='"+u+"' class='on'>"+u+"</li>":"<li data-num='"+u+"'>"+u+"</li>"}var d=t.getElementById("yearBox");d.querySelector("ul").innerHTML=s,d.querySelector("ul").translateY=-c*r,l.year.animationEnd=function(t){var n,o;o=-t/r,$("#yearBox li").eq(o).addClass("on").siblings().removeClass("on"),a.year=e.options.starYear+o,n=a.year,i[1]=n%4==0&&n%100!=0||n%400==0?29:28,"02"===a.month&&e.creatDate(o)}}},{key:"creatMonth",value:function(){var e=this,n=0,i=t.getElementById("monthBox"),s=i.querySelector("ul"),r=a.month-1,c=e.options.itemH;this.renderItem(12,i,1,r+1);s.translateY=-r*c,l.month.animationEnd=function(t){n=-t/c,a.month=o(1+n),e.creatDate(n),$("#monthBox li").eq(n).addClass("on").siblings().removeClass("on")}}},{key:"creatDate",value:function(e){var n=0,s=t.getElementById("dateBox"),r=s.querySelector("ul"),c=a.date-1,u=this.options.itemH;e=e||parseInt(a.month)-1,this.renderItem(i[a.month-1],s,1,c+1);var d=parseInt(a.date);e&&d>28&&d>i[e]&&(a.date=""+i[e],$("#dateBox li").eq(a.date-1).addClass("on").siblings().removeClass("on")),r.translateY=-(a.date-1)*u,l.date.min=-(i[e]-1)*u,l.date.animationEnd=function(e){n=-e/u,a.date=o(1+n),$("#dateBox li").eq(n).addClass("on").siblings().removeClass("on")}}},{key:"scrollEnd",value:function(e,t){index=-e.y/this.options.itemH,a[t]=o(index),$("#"+t+"Box li").eq(index).addClass("on").siblings().removeClass("on")}},{key:"renderItem",value:function(e,t,n,a){for(var i=n,l="";i<=e;i++){var s=o(i);l+=a===i?"<li data-num='"+s+"' class='on'>"+s+"</li>":"<li data-num='"+s+"'>"+s+"</li>"}t.querySelector("ul").innerHTML=l}},{key:"event",value:function(){var e=this,n=void 0;this.$dom.on("click",function(){n=e.isInput?$(this).val():$(this).data("date");var i,l,s=t.getElementById("zlwBj");s||((s=t.createElement("DIV")).id="zlwBj",$("body").append(s)),s.style.display="block",l=void 0,l=(i=n)?new Date(i):new Date,a={year:o(l.getFullYear()),month:o(l.getMonth()+1),date:o(l.getDate())},e.renderDom()})}}]),e}();$.fn.dataPicker=function(e){return new r(this,e).init()}}(window,document);
//# sourceMappingURL=../maps/picker.min.js.map
